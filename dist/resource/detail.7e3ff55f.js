var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{d as n,aA as s,q as c,B as d,r as u,o as p,g as m,k as y,w as b,j as f,t as g,J as w,I as j}from"./vendor.7b399e54.js";import{p as h}from"./index.cdf0aeb6.js";import{a as v,t as x,d as O}from"./config.d3adc09f.js";import{e as T,_ as K}from"./index.0cf77487.js";const E=n({name:"DMaterialMaterialDetial",components:{},props:{data:Array,loading:Boolean},emits:["update"],setup(e,{emit:n}){const u=s("userNameObj"),p=c({title:"物料详情",loading1:!1,dataTrace:[],traceRowKey:"",rowKey:"",visibleModal:!1,actionObj:v}),m=[];x.forEach((e=>{const{dataIndex:a,rowKey:t,hideTable:o}=e;t&&(p.traceRowKey=a),o||m.push(e)}));const y=[];O.forEach((e=>{const{dataIndex:a,rowKey:t,hideTable:o}=e;t&&(p.rowKey=a),o||y.push(e)})),y.push({title:"操作",dataIndex:"action",align:"center",width:"80px",slots:{customRender:"action"}});return b=((e,a)=>{for(var t in a||(a={}))r.call(a,t)&&l(e,t,a[t]);if(o)for(var t of o(a))i.call(a,t)&&l(e,t,a[t]);return e})({},d(p)),a(b,t({userNameObj:u,columns:y,columnsTrace:m,update:()=>{n("update")},queryTrace:e=>{const{materialEntityId:a}=e;p.loading1=!0,p.visibleModal=!0,h({api:`material/entity/trace?materialEntityId=${a}`,method:"get"}).then((e=>{p.loading1=!1,p.dataTrace=e})).catch()},getTime:T}));var b}}),M=j("刷新"),k=j("物料轨迹");var I=K(E,[["render",function(e,a,t,o,r,i){const l=u("a-button"),n=u("d-table"),s=u("d-card"),c=u("a-modal");return p(),m(w,null,[y(s,{title:e.title},{default:b((()=>[y(n,{loading:e.loading,columns:e.columns,"data-source":e.data,rowKey:e.rowKey,isSearch:!0},{header:b((()=>[y(l,{type:"primary",onClick:e.update},{default:b((()=>[M])),_:1},8,["onClick"])])),materialEntityPositionType:b((({text:e})=>[f("p",null,g(0===e?"仓库":"流水线"),1)])),user:b((({text:a})=>[f("p",null,g(e.userNameObj[a]||a),1)])),action:b((({record:a})=>[y(l,{type:"primary",size:"small",onClick:t=>e.queryTrace(a)},{default:b((()=>[k])),_:2},1032,["onClick"])])),_:1},8,["loading","columns","data-source","rowKey"])])),_:1},8,["title"]),y(c,{visible:e.visibleModal,"onUpdate:visible":a[0]||(a[0]=a=>e.visibleModal=a),title:"物料轨迹",width:"1200px",cancelText:"取消",okText:"提交",onOk:a[1]||(a[1]=a=>e.visibleModal=!e.visibleModal)},{default:b((()=>[y(n,{loading:e.loading1,columns:e.columnsTrace,"data-source":e.dataTrace,rowKey:e.traceRowKey,isSearch:!0},{materialEntityPositionType:b((({text:e})=>[f("p",null,g(0===e?"仓库":"流水线"),1)])),materialEntityAction:b((({text:a})=>[f("p",null,g(e.actionObj[a]||a),1)])),user:b((({text:a})=>[f("p",null,g(e.userNameObj[a]||a),1)])),createTime:b((({text:a})=>[f("p",null,g(e.getTime(a)),1)])),_:1},8,["loading","columns","data-source","rowKey"])])),_:1},8,["visible"])],64)}]]);export{I as D};
