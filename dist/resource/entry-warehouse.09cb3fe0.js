var a=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,e,r)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;import{d as s,q as n,s as m,B as d,f,r as p,o as c,g as u,k as y,w as b,c as g,h as v,J as h,a2 as w,T as D,I as j}from"./vendor.7b399e54.js";import{p as P}from"./index.cdf0aeb6.js";import{g as E}from"./config.8bfe03b2.js";import{D as O}from"./detail.7e3ff55f.js";import{_}from"./index.0cf77487.js";import"./config.d3adc09f.js";const I=s({name:"DMaterialEntryFactory",components:{DMaterialDetail:O},setup(){const a=n({title:"生产入库",tagStr:""}),s=n({rfTagCodeList:[],materialEntityAction:2,materialEntityPositionType:1,materialEntityPosition:null}),p=n({}),{useForm:c}=w,{resetFields:u}=c(s,p);s.rfTagCodeList=m((()=>a.tagStr.trim().split(/[\n\s+,，；;]/g).filter((a=>a))));const{rfTagCodeList:y}=d(s),{loading:b,materialDetail:g,queryMaterialDetail:v}=E(y),h=f([]);return P({api:"/warehouse",method:"get"}).then((a=>{h.value=a.map((a=>({value:a.warehouseId,label:a.warehouseName})))})).catch(),j=((a,t)=>{for(var e in t||(t={}))l.call(t,e)&&o(a,e,t[e]);if(r)for(var e of r(t))i.call(t,e)&&o(a,e,t[e]);return a})({},d(a)),t(j,e({formItem:s,materialEntityPositionArr:h,submit:()=>{a.loading=!0,P({api:"/material/entity",method:"put",data:s}).then((()=>{D.success(`${a.title}成功`),u(),a.tagStr=""})).catch()},loading:b,materialDetail:g,queryMaterialDetail:v}));var j}}),S=j("提交");var x=_(I,[["render",function(a,t,e,r,l,i){const o=p("a-select"),s=p("a-form-item"),n=p("a-textarea"),m=p("a-button"),d=p("a-form"),f=p("d-card"),w=p("d-material-detail");return c(),u(h,null,[y(f,{title:a.title},{default:b((()=>[y(d,{name:"custom-validation",ref:"formRef",model:a.formItem,class:"d-form","label-col":{span:4},"wrapper-col":{span:12}},{default:b((()=>[y(s,{label:"物料位置",name:"materialEntityPosition"},{default:b((()=>[y(o,{value:a.formItem.materialEntityPosition,"onUpdate:value":t[0]||(t[0]=t=>a.formItem.materialEntityPosition=t),placeholder:"请选择","show-search":"","option-filter-prop":"label",options:a.materialEntityPositionArr},null,8,["value","options"])])),_:1}),y(s,{label:"RF标签码",name:"tagStr"},{default:b((()=>[y(n,{value:a.tagStr,"onUpdate:value":t[1]||(t[1]=t=>a.tagStr=t),placeholder:"请输入RF标签码","auto-size":{minRows:3,maxRows:6},"allow-clear":""},null,8,["value"])])),_:1}),y(s,{"wrapper-col":{span:12,offset:4}},{default:b((()=>[y(m,{class:"d-button",type:"primary",onClick:a.submit},{default:b((()=>[S])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title"]),a.materialDetail&&a.materialDetail.length>0?(c(),g(w,{key:0,data:a.materialDetail,loading:a.loading,onUpdate:a.queryMaterialDetail},null,8,["data","loading","onUpdate"])):v("",!0)],64)}],["__scopeId","data-v-2f1cfb43"]]);export{x as default};
