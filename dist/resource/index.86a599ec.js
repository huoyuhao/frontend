var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{d as i,a3 as n,q as s,B as u,a2 as c,r as p,o as m,c as f,w as b,k as y,g as v,E as I,J as w,at as x,h,I as g}from"./vendor.7b399e54.js";import{p as k}from"./index.cdf0aeb6.js";import{a as D,d as M}from"./index.57446d29.js";import{_ as O}from"./index.0cf77487.js";const j=[{title:"唯一标识",dataIndex:"userId",hideTable:!0,rowKey:!0,hideForm:!0},{title:"员工编号",dataIndex:"userCode",required:!0},{title:"员工姓名",dataIndex:"userName",required:!0},{title:"员工角色",dataIndex:"role",required:!0},{title:"密码",dataIndex:"psw",hideTable:!0,required:!0},{title:"备注",dataIndex:"description"}],q=i({name:"DAddSettingUser",components:{"a-input-password":n.Password},props:{visible:{required:!0,type:Boolean,default:!1},formData:{type:Object,default:()=>null},isModify:{required:!0,type:Boolean,default:!1}},setup(e,{emit:a}){const t=s({}),o=s({});j.forEach((e=>{const{title:a,dataIndex:d}=e;e.required&&(o[d]=[{required:!0,message:`${a}不能为空！`}]),t[d]=""}));const{useForm:d}=c,{resetFields:l,validate:r,validateInfos:i}=d(t,o),{visibleModal:n,close:p,submit:m}=D(u(e),a,{resetFields:l,validate:r},{formItem:t,api:"/user"});return{list:j,formItem:t,visibleModal:n,validateInfos:i,close:p,submit:m}}});const K=i({name:"DSettingAccountData",components:{DAdd:O(q,[["render",function(e,a,t,o,d,l){const r=p("a-input-password"),i=p("a-form-item"),n=p("a-input"),s=p("a-form"),u=p("a-modal");return m(),f(u,{visible:e.visibleModal,"onUpdate:visible":a[0]||(a[0]=a=>e.visibleModal=a),title:e.isModify?"修改":"新增",width:"800px",cancelText:"取消",okText:"提交",onOk:e.submit,onCancel:e.close},{default:b((()=>[y(s,{"label-col":{span:6},"wrapper-col":{span:14}},{default:b((()=>[(m(!0),v(w,null,I(e.list,(a=>(m(),v(w,null,["psw"===a.dataIndex?(m(),f(i,x({key:0,key:a.dataIndex,label:a.title},e.validateInfos[a.dataIndex]),{default:b((()=>[y(r,{value:e.formItem[a.dataIndex],"onUpdate:value":t=>e.formItem[a.dataIndex]=t,placeholder:"请输入密码"},null,8,["value","onUpdate:value"])])),_:2},1040,["label"])):a.hideForm?h("",!0):(m(),f(i,x({key:1,key:a.dataIndex,label:a.title},e.validateInfos[a.dataIndex]),{default:b((()=>[y(n,{value:e.formItem[a.dataIndex],"onUpdate:value":t=>e.formItem[a.dataIndex]=t,disabled:e.isModify&&(a.disabled||!1)},null,8,["value","onUpdate:value","disabled"])])),_:2},1040,["label"]))],64)))),256))])),_:1})])),_:1},8,["visible","title","onOk","onCancel"])}]])},setup(){const e=s({title:"用户",loading:!1,data:[],rowKey:"",showModal:!1,formData:{}}),i="/user",n=[];j.forEach((a=>{const{dataIndex:t,rowKey:o,hideTable:d}=a;o&&(e.rowKey=t),d||n.push(a)})),n.push({title:"操作",dataIndex:"action",align:"center",width:"80px",slots:{customRender:"action"}});const c=()=>{e.loading=!0,k({api:i,method:"get"}).then((a=>{e.loading=!1,e.data=a})).catch()},p=()=>{c()},{deleteModal:m}=M();return c(),f=((e,a)=>{for(var t in a||(a={}))d.call(a,t)&&r(e,t,a[t]);if(o)for(var t of o(a))l.call(a,t)&&r(e,t,a[t]);return e})({},u(e)),a(f,t({columns:n,query:c,update:p,add:()=>{e.showModal=!0,e.formData={}},deleteData:a=>{const t=a[e.rowKey],o={method:"delete",api:i,data:{[e.rowKey]:t}};m(o,(()=>{p()}))},modify:a=>{e.showModal=!0,e.formData=a}}));var f}}),_=g("刷新"),C=g("新增"),U=g("删除");var P=O(K,[["render",function(e,a,t,o,d,l){const r=p("a-button"),i=p("d-table"),n=p("d-card"),s=p("d-add");return m(),v(w,null,[y(n,{title:e.title},{default:b((()=>[y(i,{loading:e.loading,columns:e.columns,"data-source":e.data,rowKey:e.rowKey,isSearch:!0},{header:b((()=>[y(r,{type:"primary",onClick:e.query},{default:b((()=>[_])),_:1},8,["onClick"]),y(r,{type:"primary",onClick:e.add},{default:b((()=>[C])),_:1},8,["onClick"])])),action:b((({record:a})=>[y(r,{type:"primary",size:"small",onClick:t=>e.deleteData(a)},{default:b((()=>[U])),_:2},1032,["onClick"])])),_:1},8,["loading","columns","data-source","rowKey"])])),_:1},8,["title"]),y(s,{visible:e.showModal,"onUpdate:visible":a[0]||(a[0]=a=>e.showModal=a),"form-data":e.formData,"is-modify":Boolean(e.formData[e.rowKey]),onUpdate:e.update},null,8,["visible","form-data","is-modify","onUpdate"])],64)}]]);export{P as default};
