import{d as e,aB as a,P as t,aC as l,q as d,aA as r,B as i,a2 as o,r as n,o as s,c as u,w as m,k as p,g as I,E as f,J as v,at as c,h as x,I as b}from"./vendor.7b399e54.js";import{a as y}from"./index.57446d29.js";import{_ as w}from"./index.0cf77487.js";const h=[{title:"唯一标识",dataIndex:"noteId",rowKey:!0,hideTable:!0,hideForm:!0},{title:"单据代码",dataIndex:"noteCode",required:!0},{title:"单据类型",dataIndex:"noteType",required:!0,slots:{customRender:"noteType"}},{title:"红蓝单",dataIndex:"redBlue"},{title:"原材料",dataIndex:"materialList",hideTable:!0,slots:{customRender:"materialList"}},{title:"领料⼈",dataIndex:"ownerUserId",required:!0,slots:{customRender:"user"}},{title:"发料⼈",dataIndex:"handlerUserId",required:!0,slots:{customRender:"user"}},{title:"⽤途",dataIndex:"usage"},{title:"描述",dataIndex:"description"}],M=[{title:"物料ID",dataIndex:"rawMaterialId",rowKey:!0},{title:"物料代码",dataIndex:"rawMaterialCode"},{title:"物料名称",dataIndex:"rawMaterialName"},{title:"物料数量",dataIndex:"rawMaterialNum"}],k=[{label:"领料单",value:0}],U=e({name:"DAddNoteData",components:{MinusCircleOutlined:a,PlusOutlined:t,"a-radio-group":l.Group,"a-radio-button":l.Button},props:{visible:{required:!0,type:Boolean,default:!1},formData:{type:Object,default:()=>null},isModify:{required:!0,type:Boolean,default:!1},materialArr:Array,materialObj:Object},setup(e,{emit:a}){const t=d({}),l=d({}),n=r("userArr");h.forEach((e=>{const{title:a,dataIndex:d}=e;e.required&&(l[d]=[{required:!0,message:`${a}不能为空！`}]),t[d]=""}));const{useForm:s}=o,{resetFields:u,validate:m,validateInfos:p}=s(t,l),{visibleModal:I,close:f,submit:v}=y(i(e),a,{resetFields:u,validate:m},{formItem:t,api:"/note"});return{addRawMaterialList:()=>{t.materialList.push({rawMaterialId:null,rawMaterialNum:null})},removeRawMaterialList:e=>{const a=t.materialList.indexOf(e);-1!==a&&t.materialList.splice(a,1)},list:h,userArr:n,noteTypeArr:k,formItem:t,visibleModal:I,validateInfos:p,close:f,submit:v}}}),_=b("红单"),L=b("蓝单"),O=b(" 新增物料 ");var C=w(U,[["render",function(e,a,t,l,d,r){const i=n("a-radio-button"),o=n("a-radio-group"),b=n("a-form-item"),y=n("a-select"),w=n("a-col"),h=n("a-input-number"),M=n("MinusCircleOutlined"),k=n("a-row"),U=n("PlusOutlined"),C=n("a-button"),A=n("a-input"),g=n("a-form"),q=n("a-modal");return s(),u(q,{visible:e.visibleModal,"onUpdate:visible":a[0]||(a[0]=a=>e.visibleModal=a),title:e.isModify?"修改":"新增",width:"800px",cancelText:"取消",okText:"提交",onOk:e.submit,onCancel:e.close},{default:m((()=>[p(g,{"label-col":{span:6},"wrapper-col":{span:14}},{default:m((()=>[(s(!0),I(v,null,f(e.list,(a=>(s(),I(v,null,["redBlue"===a.dataIndex?(s(),u(b,c({key:0,key:a.dataIndex,label:a.title},e.validateInfos[a.dataIndex]),{default:m((()=>[p(o,{value:e.formItem[a.dataIndex],"onUpdate:value":t=>e.formItem[a.dataIndex]=t,"button-style":"solid"},{default:m((()=>[p(i,{value:0},{default:m((()=>[_])),_:1}),p(i,{value:1},{default:m((()=>[L])),_:1})])),_:2},1032,["value","onUpdate:value"])])),_:2},1040,["label"])):["ownerUserId","handlerUserId"].includes(a.dataIndex)?(s(),u(b,c({key:1,key:a.dataIndex,label:a.title},e.validateInfos[a.dataIndex]),{default:m((()=>[p(y,{value:e.formItem[a.dataIndex],"onUpdate:value":t=>e.formItem[a.dataIndex]=t,placeholder:"请选择","show-search":"","option-filter-prop":"label",options:e.userArr},null,8,["value","onUpdate:value","options"])])),_:2},1040,["label"])):"noteType"===a.dataIndex?(s(),u(b,c({key:2,key:a.dataIndex,label:a.title},e.validateInfos[a.dataIndex]),{default:m((()=>[p(y,{value:e.formItem[a.dataIndex],"onUpdate:value":t=>e.formItem[a.dataIndex]=t,placeholder:"请选择","show-search":"","option-filter-prop":"label",options:e.noteTypeArr},null,8,["value","onUpdate:value","options"])])),_:2},1040,["label"])):"materialList"===a.dataIndex?(s(),I(v,{key:3},[(s(!0),I(v,null,f(e.formItem.materialList,((t,l)=>(s(),u(b,{key:t+a+l,label:a.title,name:["domains1",l,"value"]},{default:m((()=>[p(k,{align:"middle"},{default:m((()=>[p(w,{span:"8"},{default:m((()=>[p(y,{value:t.rawMaterialId,"onUpdate:value":e=>t.rawMaterialId=e,placeholder:"请选择","show-search":"","option-filter-prop":"label",options:e.materialArr},null,8,["value","onUpdate:value","options"])])),_:2},1024),p(w,{span:"11",offset:"2"},{default:m((()=>[p(h,{value:t.rawMaterialNum,"onUpdate:value":e=>t.rawMaterialNum=e,placeholder:"请输入原材料数量",formatter:a=>`${a}${e.materialObj[t.rawMaterialId]||""}`,parser:a=>a.replace(`${e.materialObj[t.rawMaterialId]||""}`,"")},null,8,["value","onUpdate:value","formatter","parser"])])),_:2},1024),p(w,{span:"1"},{default:m((()=>[e.formItem.materialList.length>1?(s(),u(M,{key:0,class:"dynamic-delete-button",disabled:1===e.formItem.materialList.length,onClick:a=>e.removeRawMaterialList(t)},null,8,["disabled","onClick"])):x("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","name"])))),128)),p(b,{key:a.dataIndex},{default:m((()=>[p(C,{type:"dashed",style:{width:"60%","margin-left":"190px"},onClick:e.addRawMaterialList},{default:m((()=>[p(U),O])),_:1},8,["onClick"])])),_:2},1024)],64)):a.hideForm?x("",!0):(s(),u(b,c({key:4,key:a.dataIndex,label:a.title},e.validateInfos[a.dataIndex]),{default:m((()=>[p(A,{value:e.formItem[a.dataIndex],"onUpdate:value":t=>e.formItem[a.dataIndex]=t},null,8,["value","onUpdate:value"])])),_:2},1040,["label"]))],64)))),256))])),_:1})])),_:1},8,["visible","title","onOk","onCancel"])}]]);export{C as D,h as l,M as m};
