var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;import{d as s,aA as n,q as d,s as p,B as m,r as f,o as u,g as c,k as b,w as g,c as y,h as v,J as w,a2 as h,T as I,I as D}from"./vendor.7b399e54.js";import{p as j}from"./index.cdf0aeb6.js";import{g as _}from"./config.8bfe03b2.js";import{D as O}from"./detail.7e3ff55f.js";import{_ as S}from"./index.0cf77487.js";import"./config.d3adc09f.js";const A=s({name:"DMaterialEntryFactory",components:{DMaterialDetail:O},setup(){const e=n("userArr"),s=d({title:"出库",tagStr:""}),f=d({rfTagCodeList:[],materialEntityAction:1,materialEntityPositionType:1,warehouseKeeperId:"",ownerId:""}),u=d({}),{useForm:c}=h,{resetFields:b}=c(f,u);f.rfTagCodeList=p((()=>s.tagStr.trim().split(/[\n\s+,，；;]/g).filter((e=>e))));const{rfTagCodeList:g}=m(f),{loading:y,materialDetail:v,queryMaterialDetail:w}=_(g);return D=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&i(e,t,a[t]);if(r)for(var t of r(a))o.call(a,t)&&i(e,t,a[t]);return e})({},m(s)),a(D,t({formItem:f,userArr:e,submit:()=>{j({api:"/material/entity",method:"put",data:f}).then((()=>{I.success(`${s.title}成功`),b(),s.tagStr=""})).catch()},loading:y,materialDetail:v,queryMaterialDetail:w}));var D}}),P=D("提交");var x=S(A,[["render",function(e,a,t,r,l,o){const i=f("a-textarea"),s=f("a-form-item"),n=f("a-select"),d=f("a-button"),p=f("a-form"),m=f("d-card"),h=f("d-material-detail");return u(),c(w,null,[b(m,{title:e.title},{default:g((()=>[b(p,{name:"custom-validation",ref:"formRef",model:e.formItem,class:"d-form","label-col":{span:4},"wrapper-col":{span:12}},{default:g((()=>[b(s,{label:"RF标签码",name:"tagStr"},{default:g((()=>[b(i,{value:e.tagStr,"onUpdate:value":a[0]||(a[0]=a=>e.tagStr=a),placeholder:"请输入RF标签码","auto-size":{minRows:3,maxRows:6},"allow-clear":""},null,8,["value"])])),_:1}),b(s,{label:"仓库管理员"},{default:g((()=>[b(n,{value:e.formItem.warehouseKeeperId,"onUpdate:value":a[1]||(a[1]=a=>e.formItem.warehouseKeeperId=a),placeholder:"请选择","show-search":"","option-filter-prop":"label",options:e.userArr},null,8,["value","options"])])),_:1}),b(s,{label:"经办人"},{default:g((()=>[b(n,{value:e.formItem.ownerId,"onUpdate:value":a[2]||(a[2]=a=>e.formItem.ownerId=a),placeholder:"请选择","show-search":"","option-filter-prop":"label",options:e.userArr},null,8,["value","options"])])),_:1}),b(s,{"wrapper-col":{span:12,offset:4}},{default:g((()=>[b(d,{class:"d-button",type:"primary",onClick:e.submit},{default:g((()=>[P])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title"]),e.materialDetail&&e.materialDetail.length>0?(u(),y(h,{key:0,data:e.materialDetail,loading:e.loading,onUpdate:e.queryMaterialDetail},null,8,["data","loading","onUpdate"])):v("",!0)],64)}],["__scopeId","data-v-536b4e4a"]]);export{x as default};
