import{a7 as t,k as e,at as a,f as o,x as s,au as i,T as n}from"./vendor.a502bbf1.js";import{p as c}from"./index.6829e04c.js";import{g as l}from"./index.b01bbdb3.js";const r=()=>({confirmModal:({title:o,content:s,width:i},n,c)=>{t.confirm({title:o||"提示",icon:e(a),width:i,content:s||"执行该操作后不可回退，是否继续？",cancelText:"取消",okText:"确定",closable:!0,maskClosable:!0,onOk(){n&&n()},onCancel(){c&&c()}})},infoModal:({title:o,content:s,width:i},n)=>{t.info({title:o||"提示",icon:e(a),width:i,content:s,cancelText:"",okText:"确定",closable:!0,maskClosable:!0,onOk(){n&&n()}})}}),d=()=>({deleteModal:(t,e)=>{const{confirmModal:a}=r();a({title:"删除提示",content:"此操作将永久删除该内容, 是否继续?"},(()=>{c(t).then((t=>{n.success("删除成功"),e&&e(t)})).catch()}))}}),f=(t,e,{resetFields:a,validate:r},{formItem:d,api:f})=>{let m="";const b=o(!1),{formData:u,visible:h,isModify:p}=t;s([h,p],(([t,e],[,o])=>{b.value=t,t&&(e===o||e||a(),l(d,i(u.value)),m=JSON.stringify(d))}));const v=()=>{e("update:visible",!1)};return{visibleModal:b,close:v,submit:()=>{r().then((()=>{if(p.value&&JSON.stringify(d)===m)return n.error("没有任何修改!");const t=p.value?"修改":"添加",o=p.value?"put":"post",s={};Object.keys(d).forEach((t=>{s[t]=d[t]}));c({api:f,method:o,data:s}).then((()=>{n.success(`${t}成功`),a(),v(),e("update")})).catch((()=>{}))})).catch((t=>{console.log(t)}))}}};export{f as a,d,r as m};
