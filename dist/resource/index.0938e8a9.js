import{a3 as t,h as e,aq as a,f as o,x as s,ar as i,N as n}from"./vendor.3dbe8742.js";import{p as c}from"./index.d1bda31d.js";import{g as l}from"./index.855c6cab.js";const d=()=>({deleteModal:(o,s)=>{const{confirmModal:i}={confirmModal:({title:o,content:s,width:i},n,c)=>{t.confirm({title:o||"提示",icon:e(a),width:i,content:s||"执行该操作后不可回退，是否继续？",cancelText:"取消",okText:"确定",closable:!0,maskClosable:!0,onOk(){n&&n()},onCancel(){c&&c()}})},infoModal:({title:o,content:s,width:i},n)=>{t.info({title:o||"提示",icon:e(a),width:i,content:s,cancelText:"",okText:"确定",closable:!0,maskClosable:!0,onOk(){n&&n()}})}};i({title:"删除提示",content:"此操作将永久删除该内容, 是否继续?"},(()=>{c(o).then((t=>{n.success("删除成功"),s&&s(t)})).catch()}))}}),r=(t,e,{resetFields:a,validate:d},{formItem:r,api:f})=>{let m="";const h=o(!1),{formData:u,visible:b,isModify:p}=t;s([b,p],(([t,e],[,o])=>{h.value=t,t&&(e===o||e||a(),l(r,i(u.value)),m=JSON.stringify(r))}));const v=()=>{e("update:visible",!1)};return{visibleModal:h,close:v,submit:()=>{d().then((()=>{if(p.value&&JSON.stringify(r)===m)return n.error("没有任何修改!");const t=p.value?"修改":"添加",o=p.value?"put":"post",s={};Object.keys(r).forEach((t=>{r[t]&&(s[t]=r[t])}));c({api:f,method:o,data:s}).then((()=>{n.success(`${t}成功`),a(),v(),e("update")})).catch((()=>{}))})).catch((t=>{console.log(t)}))}}};export{r as a,d};
