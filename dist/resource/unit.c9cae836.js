var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{d,q as n,B as s,a2 as c,r as u,o as m,c as f,w as p,k as b,g as y,E as v,J as w,at as h,h as I,I as g}from"./vendor.7b399e54.js";import{p as x}from"./index.cdf0aeb6.js";import{a as M,d as D}from"./index.57446d29.js";import{u as j}from"./config.30bfbe25.js";import{_ as k}from"./index.0cf77487.js";const O=d({name:"DAddMaterialUnit",components:{},props:{visible:{required:!0,type:Boolean,default:!1},formData:{type:Object,default:()=>null},isModify:{required:!0,type:Boolean,default:!1}},setup(e,{emit:a}){const t=n({}),o=n({});j.forEach((e=>{const{title:a,dataIndex:l}=e;e.required&&(o[l]=[{required:!0,message:`${a}不能为空！`}]),t[l]=""}));const{useForm:l}=c,{resetFields:i,validate:r,validateInfos:d}=l(t,o),{visibleModal:u,close:m,submit:f}=M(s(e),a,{resetFields:i,validate:r},{formItem:t,api:"/material/unit"});return{unit:j,formItem:t,visibleModal:u,validateInfos:d,close:m,submit:f}}});const K=d({name:"DMaterialMaterialUnit",components:{DAdd:k(O,[["render",function(e,a,t,o,l,i){const r=u("a-input"),d=u("a-form-item"),n=u("a-form"),s=u("a-modal");return m(),f(s,{visible:e.visibleModal,"onUpdate:visible":a[0]||(a[0]=a=>e.visibleModal=a),title:e.isModify?"修改":"新增",width:"800px",cancelText:"取消",okText:"提交",onOk:e.submit,onCancel:e.close},{default:p((()=>[b(n,{"label-col":{span:6},"wrapper-col":{span:14}},{default:p((()=>[(m(!0),y(w,null,v(e.unit,(a=>(m(),y(w,null,[a.hideForm?I("",!0):(m(),f(d,h({key:0,key:a.dataIndex,label:a.title},e.validateInfos[a.dataIndex]),{default:p((()=>[b(r,{value:e.formItem[String(a.dataIndex)],"onUpdate:value":t=>e.formItem[String(a.dataIndex)]=t},null,8,["value","onUpdate:value"])])),_:2},1040,["label"]))],64)))),256))])),_:1})])),_:1},8,["visible","title","onOk","onCancel"])}]])},setup(){const e=n({title:"物料单位",loading:!1,data:[],rowKey:"materialUnitId",showModal:!1,formData:null}),d="/material/unit",c=[];j.forEach((a=>{const{dataIndex:t,rowKey:o,hideTable:l}=a;o&&(e.rowKey=t),l||c.push(a)})),c.push({title:"操作",dataIndex:"action",align:"center",width:"80px",slots:{customRender:"action"}});const u=()=>{e.loading=!0,x({api:d,method:"get"}).then((a=>{e.loading=!1,e.data=a})).catch()},m=()=>{u()},{deleteModal:f}=D();return u(),p=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&r(e,t,a[t]);if(o)for(var t of o(a))i.call(a,t)&&r(e,t,a[t]);return e})({},s(e)),a(p,t({columns:c,query:u,update:m,add:()=>{e.showModal=!0,e.formData={}},deleteData:a=>{const t=a[e.rowKey],o={method:"delete",api:d,data:{[e.rowKey]:t}};f(o,(()=>{m()}))},modify:a=>{e.showModal=!0,e.formData=a}}));var p}}),U=g("刷新"),_=g("新增"),C=g("删除");var q=k(K,[["render",function(e,a,t,o,l,i){const r=u("a-button"),d=u("d-table"),n=u("d-card"),s=u("d-add");return m(),y(w,null,[b(n,{title:e.title},{default:p((()=>[b(d,{loading:e.loading,columns:e.columns,"data-source":e.data,rowKey:e.rowKey,isSearch:!0},{header:p((()=>[b(r,{type:"primary",onClick:e.query},{default:p((()=>[U])),_:1},8,["onClick"]),b(r,{type:"primary",onClick:e.add},{default:p((()=>[_])),_:1},8,["onClick"])])),action:p((({record:a})=>[b(r,{type:"primary",size:"small",onClick:t=>e.deleteData(a)},{default:p((()=>[C])),_:2},1032,["onClick"])])),_:1},8,["loading","columns","data-source","rowKey"])])),_:1},8,["title"]),b(s,{visible:e.showModal,"onUpdate:visible":a[0]||(a[0]=a=>e.showModal=a),"form-data":e.formData,"is-modify":Boolean(e.formData&&e.formData[e.rowKey]),onUpdate:e.update},null,8,["visible","form-data","is-modify","onUpdate"])],64)}]]);export{q as default};
